(this["webpackJsonpbananagrams-helper"]=this["webpackJsonpbananagrams-helper"]||[]).push([[0],{14:function(t,e,r){},19:function(t,e,r){"use strict";r.r(e);var n=r(4),a=r(0),s=(r(14),r(1)),i=r(2),c=function(){function t(e){Object(s.a)(this,t),this.words=new Set(e.split(/\s*,\s*/))}return Object(i.a)(t,[{key:"allows",value:function(t){return!this.words.has(t)}}]),t}(),u=function(t){return new c(t)},o=r(9),l=function(){function t(e){var r=e.numCols,n=e.numRows,a=e.rows;Object(s.a)(this,t),this.numCols=r||1,this.numRows=n||1,this.rows=a||new Map([[0,new Map([[0," "]])]])}return Object(i.a)(t,[{key:"getArray",value:function(){var t=this;return Object(o.a)(Array(this.numRows).keys()).map((function(e){var r=t.board.get(e),n=Array(t.numCols).fill(" ");return r&&r.forEach((function(t,e){n[e]=t})),n}))}},{key:"getNext",value:function(e){var r=e.getDelta(),n=new Map,a=r.row,s=r.col,i=this.numCols,c=0,u=0;if(a<0&&(c=-a,a=0),s<0&&(u=-s,s=0),this.rows.forEach((function(t,e){var r=new Map;t.forEach((function(t,e){u+e+1>i&&(i=u+e+1),r.set(u+e,t)})),n.set(c+e,r)})),r.down)r.wordArr.forEach((function(t,e){var r=a+e;n.has(r)||n.set(r,new Map),n.get(r).set(s,t)}));else{var l=n.get(a);r.wordArr.split("").forEach((function(t,e){var r=s+e;l.set(r,t)}))}var h=Math.max.apply(Math,Object(o.a)(n.keys()))+1;return new t({numCols:i,numRows:h,rows:n})}}]),t}(),h=function(){function t(e){var r=e.board;Object(s.a)(this,t),this.board=r}return Object(i.a)(t,[{key:"getNext",value:function(){}}]),t}(),v=Symbol("Branches"),d=Symbol("Finishes Word"),f=Symbol("Parent Branch"),p=function(){function t(e){var r,n=e.branch,a=e.parts,i=e.placement,c=e.segment,u=e.state,o=e.word;Object(s.a)(this,t),r=u?u.getSolve():(u=i.getState()).getSolve(),this.blacklist=r.getBlacklist(),this.branch=n,this.parts=a,this.segment=c,this.tray=u.getTray(),this.trie=r.getSolver().getTrie(),this.word=o,this.wordArr=o?o.split(""):[]}return Object(i.a)(t,[{key:"getArray",value:function(){return this.wordArr.length||(this.wordArr=this.word.split("")),this.wordArr}},{key:"getNext",value:function(){var e=this.getNextValidWord();return!!e&&new t({branch:e.branch,parts:e.parts,placement:this.placement,segment:this.segment,state:this.state,word:e.word})}},{key:"getNextValidWord",value:function(){var e=this;return function r(n,a){if(a.has(v))a.get(v).some((function(t,r){return!!e.partMeetsCriteria(r)&&(n.push(r),a=t,!0)}));else{if(!a.has(f))return!1;var s=function t(r,n){var a=n.pop();return r.get(v).some((function(t,s){return a?(a===s&&(a=!1),!1):!!e.partMeetsCriteria(s)&&(n.push(s),r=t,!0)}))?{branch:r,parts:n}:!!r.has(f)&&t(r.get(f),n)}(a.get(f),n);if(!s)return!1;a=s.branch,n=s.parts}var i=n.join("");return a.has(d)&&e.blacklist.allows(i)&&e.segment.allows(i)?new t({branch:a,parts:n,placement:e,segment:e.segment,word:i}):r(n.slice(),a)}(this.parts.slice()||["a"],this.branch||this.trie.getData().get("a"))}},{key:"init",value:function(){var t=this.getNextValidWord();if(!t)return!1;this.branch=t.branch,this.parts=t.parts,this.word=t.word,this.wordArr=t.word.split("")}},{key:"partMeetsCriteria",value:function(t){for(var e=this.tray.getCountsWith(this.segment),r=function(){var r=t[0],n=0;if(t=t.replaceAll(r,(function(){return n++,""})),!e.has(r)||e.get(r)<n)return{v:!1}};t.length>0;){var n=r();if("object"===typeof n)return n.v}return!0}}]),t}(),g=function(t){var e=t.placement,r=t.segment,n=t.state,a=new p({placement:e,segment:r,state:n});return!!a.init()&&a},b=function(){function t(e){var r=e.index,n=e.placement,a=e.segment,i=e.state,c=e.word;Object(s.a)(this,t),this.index=r,this.placement=n,this.segment=a,this.state=i,this.word=c}return Object(i.a)(t,[{key:"init",value:function(){}},{key:"getDelta",value:function(){return{col:this.col,down:this.down,row:this.row,wordArr:this.word.getArray()}}},{key:"getNext",value:function(){var t=this.index?this.index+1:1;if(t<this.total)return y({index:t,placement:this});var e=this.word.getNext();if(e)return y({placement:this,word:e});var r=this.segment.getNext();if(!r)return!1;for(e=g({placement:this,segment:r});!e;){if(!(r=r.getNext()))return!1;e=g({placement:this,segment:r})}return y({placement:this,segment:r,word:e})}},{key:"getPlacedTiles",value:function(){return this.tiles}},{key:"getState",value:function(){return this.state}}]),t}(),y=function(t){var e=t.index,r=t.placement,n=t.segment,a=t.state,s=t.word;if(!(n=n||new h({state:a})))return!1;if(!(s=s||g({segment:n,state:a})))return!1;var i=new b({index:e,placement:r,segment:n,state:a,word:s});return!!i.init()&&i},m=function(){function t(e){var r=e.board,n=e.parent,a=e.placement,i=e.solve,c=e.tray;Object(s.a)(this,t),this.board=r,this.parent=n,this.placement=a,this.solve=i,this.tray=c||i.getTray()}return Object(i.a)(t,[{key:"getAdvanced",value:function(){var e=y({state:this});return!!e&&new t({board:this.board.getNext(e),parent:this,placement:e,tray:this.tray.getNext(e.getPlacedTiles())})}},{key:"getBoard",value:function(){return this.board}},{key:"getNext",value:function(){var e=this.parent,r=e.getPlacement().getNext();if(!r)return!1;var n=this.board.getNext(r);return!!n&&new t({blacklist:this.blacklist,board:n,parent:e,placement:r,tray:this.tray.getNext(r.getPlacedTiles())})}},{key:"getPlacement",value:function(){return this.placement}},{key:"getPrev",value:function(){return this.previous}},{key:"getSolve",value:function(){return this.solve}},{key:"getTray",value:function(){return this.tray}},{key:"isSolved",value:function(){return this.tray.isEmpty()}}]),t}(),w=function(){function t(e){var r=e.blacklist,n=e.solver,a=e.tray,i=e.update;Object(s.a)(this,t),this.blacklist=r,this.solver=n,this.tray=a,this.update=i}return Object(i.a)(t,[{key:"getBlacklist",value:function(){return this.blacklist}},{key:"getSolver",value:function(){return this.solver}},{key:"getTray",value:function(){return this.tray}},{key:"handleUpdate",value:function(t,e){var r=t.getBoard().getArray(),n=t.getTray().getString();return this.update({boardArr:r,message:e,remainingTray:n},this.start)}},{key:"start",value:function(){var t;return this.start=(new Date).getTime(),this.step(function(t){return new m(t)}({board:(t={},new l(t)),solve:this})),this.start}},{key:"step",value:function(t){if(t.isSolved())this.handleUpdate(t,"Solution found!");else if(!this.tryNextStep(t.getAdvanced(),"Advancing state...")&&!this.tryNextStep(t.getNext(),"Trying next state...")){for(var e=t.getPrev();e;){if(this.tryNextStep(e.getNext(),"Trying previous next state..."))return;e=e.getPrev()}this.handleUpdate(t,"No solutions possible!")}}},{key:"tryNextStep",value:function(t,e){var r=this;if(!t)return!1;var n=setTimeout((function(){return r.step(t)}));return this.handleUpdate(t,e)||clearTimeout(n),!0}}]),t}(),j=function(){function t(e){Object(s.a)(this,t),this.str=e,this.counts=e.split("").reduce((function(t,e){return t.set(e,t.has(e)?t.get(e)+1:1),t}),new Map)}return Object(i.a)(t,[{key:"getCountsWith",value:function(t){var e=this,r=new Map;return this.counts.forEach((function(t,e){r[e]=t})),t.getCounts().forEach((function(t,n){r.set(n,e.counts.has(n)?e.counts.get(n)+t:t)})),r}},{key:"getNext",value:function(e){var r=this.str;return e.forEach((function(t){r=r.replace(t,"")})),new t(r)}},{key:"getString",value:function(){return this.str}},{key:"isEmpty",value:function(){return!this.str}}]),t}(),x=r(8),k=r.n(x),O=r(10),S=r.p+"static/media/words.cc212d38.txt",N=new Map("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map((function(t,e){return[t,e]}))),A=function(t){if(N.has(t))return N.get(t);for(var e=t.length,r=0,n=1,a=1,s=36;n<e;)r+=s,n++,s*=36;for(var i=e-1;i>=0;i--){var c=t.charCodeAt(i)-48;c>10&&(c-=7),r+=c*a,a*=36}return N.set(t,r),r},M=function(){function t(){Object(s.a)(this,t)}return Object(i.a)(t,[{key:"getData",value:function(){return this.data}},{key:"init",value:function(){var t=this;return new Promise((function(e){fetch(S.slice(1)).then(function(){var r=Object(O.a)(k.a.mark((function r(n){var a,s,i,c;return k.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=new RegExp("([0-9A-Z]+):([0-9A-Z]+)"),s=new Map,r.next=4,n.text();case 4:(i=r.sent.split(";")).some((function(t){var e=a.exec(t);return!e||(s.set(e[1],A(e[2])),!1)})),i=i.slice(s.size),c=function t(e,r){var n=i[e],a=new Map,c=new Map;a.set(v,c),r&&a.set(f,r),"!"===n[0]&&(a.set(d,!0),n=n.slice(1));for(var u=n.split(/([A-Z0-9,]+)/g),o=0;o<u.length;){var l=u[o];if(l){var h=u[o+1];","!==h&&void 0!==h?(c.set(l,t(s.has(h)?s.get(h):e+A(h)+1-s.size,a)),o+=2):(c.set(l,new Map([[d,!0]])),o+=2)}else o+=2}return a},t.data=c(0),e();case 10:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())}))}}]),t}(),T=function(){function t(){var e=this;Object(s.a)(this,t),this.solveStart=0,this.trie=new M,this.trie.init().then((function(){e.updateFn({ready:!0})}))}return Object(i.a)(t,[{key:"getTrie",value:function(){return this.trie}},{key:"onUpdate",value:function(t){this.updateFn=t}},{key:"solve",value:function(t){var e,r,n=this,a=t.blacklistStr,s=t.trayStr;this.solveStart=(e={blacklist:u(a),solver:this,tray:(r=s,new j(r)),update:function(t,e){return e===n.solveStart&&(n.updateFn(t),!0)}},new w(e).start())}}]),t}(),C=r(3),E=r.n(C),B=r(11),P=r.n(B),R=new T,U=function(){var t=Object(C.useState)(""),e=Object(n.a)(t,2),r=e[0],s=e[1],i=Object(C.useState)([[" "]]),c=Object(n.a)(i,2),u=c[0],o=c[1],l=Object(C.useState)("Loading..."),h=Object(n.a)(l,2),v=h[0],d=h[1],f=Object(C.useState)(!1),p=Object(n.a)(f,2),g=p[0],b=p[1],y=Object(C.useState)(""),m=Object(n.a)(y,2),w=m[0],j=m[1],x=Object(C.useState)(""),k=Object(n.a)(x,2),O=k[0],S=k[1],N={setBoardArr:o,setMessage:d,setReady:b,setRemainingTray:j};return R.onUpdate((function(t){return Object.keys(t).forEach((function(e){return N["set".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1))](t[e])}))})),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"header",children:Object(a.jsx)("h1",{children:"Bananagrams Helper"})}),Object(a.jsx)("div",{className:"letterbox",children:Object(a.jsx)("input",{type:"text",placeholder:"yourtileshere",value:O,onInput:function(t){var e=t.target.value.replace(/[^A-Z]/gi,"").toLowerCase();S(e),R.solve({blacklistStr:r,trayStr:e})},disabled:!g})}),Object(a.jsxs)("div",{className:"controls",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Word Blacklist"}),Object(a.jsx)("small",{children:"(Comma-separated)"})]}),Object(a.jsx)("div",{children:Object(a.jsx)("input",{type:"text",value:r,onInput:function(t){var e=t.target.value.replace(/[^A-Z,]/gi,"").toLowerCase();s(e),R.solve({blacklistStr:e,trayStr:O})},disabled:!g})})]}),Object(a.jsx)("div",{className:"boardbox",children:Object(a.jsx)("div",{className:"board",children:u.map((function(t,e){return Object(a.jsx)("div",{className:"row",children:t.map((function(t,e){return Object(a.jsx)("div",{className:" "===t?"cell empty":"cell",children:t},e)}))},e)}))})}),Object(a.jsx)("div",{className:"tray",children:w}),Object(a.jsx)("div",{className:"message",children:v})]})};P.a.render(Object(a.jsx)(E.a.StrictMode,{children:Object(a.jsx)(U,{})}),document.getElementById("app"))}},[[19,1,2]]]);
//# sourceMappingURL=main.bb7b5b86.chunk.js.map